warmode 'on'
@unsetalias 'mytarget'
// set enemy
sysmsg 'Whose ass is about to be kicked?'
promptalias 'mytarget'
headmsg '▽' 74 'mytarget'
headmsg '▽▽' 74 'mytarget'
headmsg '▽▽▽' 74 'mytarget'
// honor enemy
if @inrange 'mytarget' 12
  //@headmsg 'START HONORING' 44 'self'
  virtue 'honor'
  waitfortarget 1500
  target! 'mytarget'
  @headmsg '★★ HONORED ★★' 74 'mytarget'
endif
// use lightning strike
if not buffexists 1096 and mana > 6
  cast 'lightning strike'
  pause 600
endif
// Enemy of One
while not buffexists 1011
  cast 'enemy of one'
  pause 600
endwhile
// Curse Weapon
if not buffexists 1088
  cast 'curse weapon'
  pause 1100
endif
// Attack Start
headmsg 'ATTACKING' 34 'self'
attack 'mytarget'
// attack start when enemy in range 5
while @inrange 'mytarget' 5
  headmsg '▼▼▼' 34 'mytarget'
  // Lightning Strike
  if not buffexists  1096
    cast "Lightning Strike"
    pause 600
  endif
  // use Consecrate Weapon
  if not buffexists 1082 and mana > 12
    cast 'Consecrate Weapon'
    pause 600
  endif
  // cast Confidence
  if hits <= 40
    cast 'confidence'
    pause 600
  endif
  // cast divine fury
  if not buffexists 1010
    cast 'divine fury'
    pause 600
  else
    // cast Counter Attack
    if not buffexists 1095
      cast 'Counter Attack'
      pause 600
    endif
    // Curse Weapon
    if not buffexists 1088
      cast 'curse weapon'
      pause 1100
    endif
    // remove blood oath (eat enchanted apple or cast remove curse)
    if buffexists 1015
      if @findtype 0x2fd8 'any' 'backpack'
       usetype! 0x2fd8
       pause 600
      else
      cast 'remove curse'
      pause 600
    endif
    pause 1
  endwhile
